
<div class="container mx-auto px-4 py-8">
  <!-- Encabezado -->
  <div class="flex flex-col md:flex-row justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-military-navy mb-4 md:mb-0">
      Vacantes Disponibles
    </h1>
    <button
      (click)="showDialog()"
      class="bg-military-gold text-black hover:bg-amber-500 px-6 py-2 rounded font-medium shadow">
      Publicar Nueva Vacante
    </button>
  </div>
  <app-filtro (filtersChanged)="onFiltersChanged($event)"></app-filtro>
  <app-vacante-list [filters]="currentFilters"></app-vacante-list>
</div>

<p-dialog
  [modal]="true"
  [(visible)]="visible"
  styleClass="custom-dialog-position"
  [style]="{ width: '50rem' }"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [maximizable]="true"
  [dismissableMask]="true"
  [contentStyle]="{ 'background-color': 'white', 'padding': '1.5rem', 'border-radius': '0.5rem' }">

  <div class="mb-6">
    <div class="flex items-center gap-2 text-xl font-semibold text-foreground">
      <lucide-angular [img]="Briefcase"
        class="w-5 h-5 text-yellow-600"></lucide-angular> Crear Nueva Vacante
    </div>
    <p class="text-sm text-gray-500">Complete el formulario para publicar una
      nueva vacante militar</p>
  </div>
  <!-- create-job-form.component.html -->
  <form [formGroup]="vacanteForm" class="space-y-6">

    <!-- Agrega los campos del formulario aquí -->
    <div class="grid md:grid-cols-2 gap-4">
      <label class="block">
        <span class="font-medium">Título de la Posición *</span>
        <input type="text" formControlName="titulo"
          placeholder="Ej: Especialista en Ciberseguridad"
          class="mt-1 block w-full rounded border-gray-300" />
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('titulo')?.invalid && (vacanteForm.get('titulo')?.touched || vacanteForm)">
          Este campo es obligatorio
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Institución *</span>
        <select formControlName="institucionId"
          class="mt-1 block w-full rounded border-gray-300">
          <option [value]="null" disabled>Seleccionar institución</option>
          <option *ngFor="let item of institutions"
            [value]="item.id">{{item.codigoNombre}}</option>

        </select>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('institucionId')?.invalid && (vacanteForm.get('institucionId')?.touched || vacanteForm)">
          Seleccione una Institución
        </span>
      </label>
    </div>

    <div class="grid md:grid-cols-3 gap-4">
      <label class="block">
        <span class="font-medium">Ubicación *</span>
        <select formControlName="provinciaId"
          class="mt-1 block w-full rounded border-gray-300">
          <option [value]="null" disabled>Seleccionar provincia</option>
          <option *ngFor="let item of provinciaList"
            [value]="item.id">{{item.nombre}}</option>

        </select>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('provinciaId')?.invalid && (vacanteForm.get('provinciaId')?.touched || vacanteForm)">
          Seleccione una Ubicación
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Tipo de Contrato *</span>
        <select formControlName="tipoContrato"
          class="mt-1 block w-full rounded border-gray-300">
          <option [value]="null" disabled>Tipo de empleo</option>
          <option *ngFor="let tipo of tipoContratoOpciones"
            [value]="tipo.value">
            {{ tipo.label }}
          </option>
        </select>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('tipoContrato')?.invalid && (vacanteForm.get('tipoContrato')?.touched || vacanteForm)">
          Seleccione el tipo de contrato
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Categoría *</span>
        <select formControlName="categoriaId"
          class="mt-1 block w-full rounded border-gray-300">
          <option [value]="null" disabled>Categoría de puesto</option>
          <option *ngFor="let item of vacanteCategoriaList"
            [value]="item.id">{{item.nombre}}</option>
        </select>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('categoriaId')?.invalid && (vacanteForm.get('categoriaId')?.touched || vacanteForm)">
          Seleccione una categoria
        </span>
      </label>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <label class="block">
        <span class="font-medium">Salario/Compensación</span>
        <input type="text" formControlName="salarioCompensacion"
          placeholder="Ej: RD$85,000 - RD$120,000 mensual"
          class="mt-1 block w-full rounded border-gray-300" />
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('salarioCompensacion')?.invalid && (vacanteForm.get('salarioCompensacion')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Fecha Límite de Aplicación</span>
        <input type="date" formControlName="fechaLimiteAplicacion"
          class="mt-1 block w-full rounded border-gray-300" />
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('fechaLimiteAplicacion')?.invalid && (vacanteForm.get('fechaLimiteAplicacion')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <label class="block">
        <span class="font-medium">Horario de Trabajo</span>
        <input type="text" formControlName="horarioTrabajo"
          placeholder="Ej: Lunes a Viernes 8:00 AM - 5:00 PM"
          class="mt-1 block w-full rounded border-gray-300" />
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('horarioTrabajo')?.invalid && (vacanteForm.get('horarioTrabajo')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Duración del Contrato</span>
        <input type="text" formControlName="duracionContrato"
          placeholder="Ej: Indefinido, 1 año, 2 años"
          class="mt-1 block w-full rounded border-gray-300" />
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('duracionContrato')?.invalid && (vacanteForm.get('duracionContrato')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>
    </div>

    <label class="block">
      <span class="font-medium">Descripción del Puesto *</span>
      <textarea formControlName="descripcionPuesto"
        placeholder="Describa las responsabilidades y objetivos del puesto..."
        class="mt-1 block w-full rounded border-gray-300 min-h-[100px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('descripcionPuesto')?.invalid && (vacanteForm.get('descripcionPuesto')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <label class="block">
      <span class="font-medium">Responsabilidades Específicas</span>
      <textarea formControlName="responsabilidadesEspecificas"
        placeholder="Liste las responsabilidades específicas del puesto..."
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('responsabilidadesEspecificas')?.invalid && (vacanteForm.get('responsabilidadesEspecificas')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <label class="block">
      <span class="font-medium">Requisitos Generales *</span>
      <textarea formControlName="requisitosGenerales"
        placeholder="Indique los requisitos generales: rango, experiencia básica, etc."
        class="mt-1 block w-full rounded border-gray-300 min-h-[100px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('requisitosGenerales')?.invalid && (vacanteForm.get('requisitosGenerales')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <div class="grid md:grid-cols-2 gap-4">
      <label class="block">
        <span class="font-medium">Educación Requerida</span>
        <textarea formControlName="educacionRequerida"
          placeholder="Ej: Licenciatura en Ingeniería, Maestría en Seguridad..."
          class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('educacionRequerida')?.invalid && (vacanteForm.get('educacionRequerida')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>

      <label class="block">
        <span class="font-medium">Experiencia Requerida</span>
        <textarea formControlName="experienciaRequerida"
          placeholder="Ej: Mínimo 5 años en operaciones militares..."
          class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
        <span
          class="text-red-500 text-sm"
          *ngIf="vacanteForm.get('experienciaRequerida')?.invalid && (vacanteForm.get('experienciaRequerida')?.touched || vacanteForm)">
          Este campo es requerido
        </span>
      </label>
    </div>

    <label class="block">
      <span class="font-medium">Habilidades y Competencias</span>
      <textarea formControlName="habilidadesCompetencias"
        placeholder="Liste las habilidades técnicas y competencias necesarias..."
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('habilidadesCompetencias')?.invalid && (vacanteForm.get('habilidadesCompetencias')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <label class="block">
      <span class="font-medium">Beneficios y Compensaciones</span>
      <textarea formControlName="beneficiosCompensaciones"
        placeholder="Describa los beneficios adicionales: seguro médico, bonificaciones, etc."
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('beneficiosCompensaciones')?.invalid && (vacanteForm.get('beneficiosCompensaciones')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <label class="block">
      <span class="font-medium">telefono de Contacto *</span>
      <input type="text" formControlName="telefono"
        placeholder="Tel:(000) 000-0000"
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"/>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('telefono')?.invalid && (vacanteForm.get('telefono')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

        <label class="block">
      <span class="font-medium">correo de Contacto *</span>
      <input type="text" formControlName="email"
        placeholder="Email: rrhh@institucion.gob.do
Dirección: Ave. 27 de Febrero, Distrito Nacional"
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"/>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('email')?.invalid && (vacanteForm.get('email')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

         <label class="block">
      <span class="font-medium">Dirección</span>
      <textarea formControlName="direccion"
        placeholder="Dirección: Ave. 27 de Febrero, Distrito Nacional"
        class="mt-1 block w-full rounded border-gray-300 min-h-[80px]"></textarea>
      <span
        class="text-red-500 text-sm"
        *ngIf="vacanteForm.get('direccion')?.invalid && (vacanteForm.get('direccion')?.touched || vacanteForm)">
        Este campo es requerido
      </span>
    </label>

    <div class="flex justify-end space-x-2 pt-6 border-t">
      <button type="button"
        class="border border-gray-300 px-4 py-2 rounded">Cancelar</button>
      <button type="button" (click)="onSubmit()"
        class="bg-military-green hover:bg-green-700 text-white px-4 py-2 rounded">
        Publicar Vacante
      </button>
    </div>
  </form>

</p-dialog>
